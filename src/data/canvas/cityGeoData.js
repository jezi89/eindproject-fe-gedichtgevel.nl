const geoJsonData = {
    "type": "FeatureCollection",
    "name": "filtered_cities",
    "crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:OGC:1.3:CRS84"}},
    "bbox": [3.57644, 48.667035, 8.320532, 53.264831],
    "features": [
        {
            "type": "Feature",
            "properties": {"id": "BE224062", "CNTR_CODE": "BE", "NAME_ASCI": "Leuven", "NSI_CODE": "24062", "NAME_NSI": "Leuven / Louvain", "NAME_LATN": "Leuven"},
            "bbox": [4.640771, 50.824524, 4.76971, 50.94408],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[4.671214, 50.935989], [4.689406, 50.94408], [4.694289, 50.941569], [4.706209, 50.941496], [4.711016, 50.937348], [4.712283, 50.92929], [4.731019, 50.938125], [4.743508, 50.93605], [4.745693, 50.93054], [4.745248, 50.925707], [4.729567, 50.922428], [4.728441, 50.919399], [4.717455, 50.915405], [4.716363, 50.909121], [4.72931, 50.906527], [4.747443, 50.908586], [4.760676, 50.907741], [4.749121, 50.893599], [4.752455, 50.888278], [4.769647, 50.888679], [4.76971, 50.884442], [4.760106, 50.872978], [4.753793, 50.871247], [4.735291, 50.857023], [4.742046, 50.842735], [4.709028, 50.844274], [4.697532, 50.834099], [4.691883, 50.834122], [4.687619, 50.831668], [4.684364, 50.826316], [4.667395, 50.824524], [4.66486, 50.826134], [4.674411, 50.829746], [4.670648, 50.835553], [4.674561, 50.838722], [4.676025, 50.846771], [4.67322, 50.850767], [4.669332, 50.851653], [4.659878, 50.847358], [4.654254, 50.85123], [4.647259, 50.848839], [4.640771, 50.854325], [4.646189, 50.862565], [4.645232, 50.876301], [4.649433, 50.878391], [4.666738, 50.880206], [4.692601, 50.899359], [4.694922, 50.918354], [4.699208, 50.920739], [4.679387, 50.93054], [4.671214, 50.935989]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "BE212025", "CNTR_CODE": "BE", "NAME_ASCI": "Mechelen", "NSI_CODE": "12025", "NAME_NSI": "Mechelen / Malines", "NAME_LATN": "Mechelen"},
            "bbox": [4.37076, 50.991577, 4.548053, 51.078296],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[4.467252, 51.072651], [4.464522, 51.071623], [4.466209, 51.067009], [4.463773, 51.064618], [4.466404, 51.061576], [4.463409, 51.056294], [4.466256, 51.05049], [4.483486, 51.053564], [4.496974, 51.044767], [4.497078, 51.041239], [4.515711, 51.03487], [4.508169, 51.032537], [4.50649, 51.025808], [4.523725, 51.023415], [4.534062, 51.019316], [4.539204, 51.011333], [4.548053, 51.00541], [4.547932, 51.002708], [4.53209, 50.996824], [4.528663, 50.992264], [4.492335, 51.008721], [4.486763, 51.005302], [4.488252, 50.996148], [4.479359, 50.991577], [4.469874, 50.994351], [4.464676, 50.994021], [4.453059, 51.005371], [4.433861, 51.001113], [4.420133, 50.99578], [4.413636, 50.999703], [4.402501, 50.998942], [4.395132, 50.996397], [4.389813, 51.005775], [4.389052, 51.01064], [4.37076, 51.01388], [4.372809, 51.021183], [4.381143, 51.029392], [4.373908, 51.036671], [4.378724, 51.040995], [4.377044, 51.045332], [4.380769, 51.046018], [4.387261, 51.042564], [4.401046, 51.04765], [4.39222, 51.053062], [4.398644, 51.055882], [4.402181, 51.061093], [4.419717, 51.06055], [4.425444, 51.066712], [4.4197, 51.073932], [4.425758, 51.073965], [4.437419, 51.078296], [4.448428, 51.07192], [4.460489, 51.073994], [4.467252, 51.072651]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "DE053034000020", "CNTR_CODE": "DE", "NAME_ASCI": "Monschau", "NSI_CODE": "05334020", "NAME_NSI": "Monschau, Stadt", "NAME_LATN": "Monschau"},
            "bbox": [6.175421, 50.495481, 6.37919, 50.611614],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[6.315556, 50.497042], [6.314201, 50.497813], [6.314121, 50.499027], [6.309076, 50.501412], [6.30567, 50.500305], [6.297613, 50.497668], [6.285006, 50.498965], [6.280388, 50.502848], [6.269526, 50.503926], [6.259552, 50.499096], [6.251327, 50.503034], [6.225219, 50.495481], [6.221247, 50.497913], [6.221329, 50.503187], [6.206272, 50.520252], [6.192201, 50.521055], [6.188097, 50.527231], [6.196467, 50.531804], [6.197841, 50.53504], [6.18734, 50.540591], [6.178562, 50.542222], [6.178239, 50.553279], [6.175421, 50.557076], [6.189313, 50.566094], [6.202297, 50.569312], [6.207495, 50.575813], [6.219832, 50.582273], [6.225282, 50.589886], [6.241211, 50.588138], [6.248885, 50.597719], [6.248751, 50.604065], [6.261716, 50.611614], [6.272637, 50.607076], [6.281207, 50.5975], [6.281972, 50.591708], [6.27528, 50.585526], [6.277498, 50.578496], [6.285175, 50.570877], [6.29896, 50.563898], [6.307322, 50.563186], [6.31411, 50.559182], [6.320736, 50.545977], [6.327045, 50.550809], [6.333936, 50.552871], [6.344066, 50.550338], [6.338319, 50.545367], [6.336671, 50.534214], [6.358233, 50.529874], [6.373476, 50.535737], [6.37919, 50.533836], [6.369034, 50.518156], [6.348251, 50.507553], [6.330086, 50.50511], [6.315556, 50.497042]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "id": "DE082011000001",
                "CNTR_CODE": "DE",
                "NAME_ASCI": "Baden-Baden",
                "NSI_CODE": "08211000",
                "NAME_NSI": "Baden-Baden, Stadt",
                "NAME_LATN": "Baden-Baden"
            },
            "bbox": [8.111097, 48.667035, 8.320532, 48.846649],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[8.229463, 48.680797], [8.229001, 48.688654], [8.225498, 48.692655], [8.227104, 48.698101], [8.215682, 48.697376], [8.207469, 48.707283], [8.194294, 48.712404], [8.191418, 48.715938], [8.17786, 48.712556], [8.162813, 48.716765], [8.146912, 48.715997], [8.111097, 48.727917], [8.122926, 48.733849], [8.126222, 48.729806], [8.134855, 48.728969], [8.143377, 48.741214], [8.150602, 48.743664], [8.177284, 48.741649], [8.182957, 48.743297], [8.182901, 48.747722], [8.201807, 48.75345], [8.20074, 48.761479], [8.185942, 48.769864], [8.175343, 48.782595], [8.154801, 48.786044], [8.146454, 48.79005], [8.164149, 48.802257], [8.161989, 48.807035], [8.169924, 48.815974], [8.168437, 48.819583], [8.191393, 48.834861], [8.188804, 48.836663], [8.186686, 48.838137], [8.181734, 48.838264], [8.173972, 48.836663], [8.168123, 48.835456], [8.162254, 48.831182], [8.160274, 48.833281], [8.161237, 48.836663], [8.162307, 48.840416], [8.156042, 48.845507], [8.158402, 48.846649], [8.164559, 48.846136], [8.168411, 48.842286], [8.181964, 48.842416], [8.19181, 48.836663], [8.203674, 48.82973], [8.211673, 48.830348], [8.213749, 48.826327], [8.221616, 48.825159], [8.226383, 48.819761], [8.236737, 48.813933], [8.249954, 48.808157], [8.255016, 48.794971], [8.270474, 48.797212], [8.277653, 48.786634], [8.287332, 48.789497], [8.294402, 48.787831], [8.290083, 48.784036], [8.288035, 48.773469], [8.280805, 48.764581], [8.285722, 48.756704], [8.293173, 48.755107], [8.304845, 48.743117], [8.315328, 48.738999], [8.32027, 48.729808], [8.320532, 48.710242], [8.320421, 48.708171], [8.314521, 48.701014], [8.305989, 48.699014], [8.297579, 48.693784], [8.297414, 48.684416], [8.275656, 48.66948], [8.256367, 48.668956], [8.240324, 48.667035], [8.234264, 48.669325], [8.234823, 48.670722], [8.232566, 48.676614], [8.231548, 48.679508], [8.229463, 48.680797]], [[8.211408, 48.719558], [8.218397, 48.717418], [8.223539, 48.718777], [8.222267, 48.721972], [8.217002, 48.723229], [8.211408, 48.719558]], [[8.201737, 48.742614], [8.204484, 48.736824], [8.211843, 48.734966], [8.219065, 48.735248], [8.21822, 48.736939], [8.211293, 48.740267], [8.20807, 48.74487], [8.205315, 48.744731], [8.201737, 48.742614]], [[8.190633, 48.745704], [8.194051, 48.744121], [8.197623, 48.746276], [8.194786, 48.747987], [8.190633, 48.745704]]], [[[8.128468, 48.748259], [8.132095, 48.752824], [8.135505, 48.752247], [8.133387, 48.748379], [8.128468, 48.748259]]], [[[8.127195, 48.755227], [8.121269, 48.757034], [8.125229, 48.759206], [8.127195, 48.755227]]], [[[8.11991, 48.74], [8.125122, 48.745633], [8.127143, 48.744903], [8.121673, 48.739617], [8.11991, 48.74]]], [[[8.112785, 48.739741], [8.114136, 48.741492], [8.11996, 48.739468], [8.118493, 48.737618], [8.112785, 48.739741]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL240995", "CNTR_CODE": "NL", "NAME_ASCI": "Lelystad", "NSI_CODE": "GM0995", "NAME_NSI": "Lelystad", "NAME_LATN": "Lelystad"},
            "bbox": [5.074623, 52.384766, 5.604963, 52.692662],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.511295, 52.663555], [5.56419, 52.615093], [5.587132, 52.56387], [5.591057, 52.515886], [5.588669, 52.511192], [5.591561, 52.500063], [5.604963, 52.484655], [5.566359, 52.469891], [5.585515, 52.448141], [5.567583, 52.435196], [5.589012, 52.411194], [5.577735, 52.409681], [5.538817, 52.385941], [5.533226, 52.384766], [5.438409, 52.442004], [5.398053, 52.420133], [5.350772, 52.400207], [5.279014, 52.422287], [5.26898, 52.426822], [5.150841, 52.522233], [5.074623, 52.583679], [5.135306, 52.603939], [5.150841, 52.609107], [5.257186, 52.64447], [5.262266, 52.67683], [5.268962, 52.680267], [5.28848, 52.691512], [5.298071, 52.692662], [5.361148, 52.675728], [5.511295, 52.663555]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL250202", "CNTR_CODE": "NL", "NAME_ASCI": "Arnhem", "NSI_CODE": "GM0202", "NAME_NSI": "Arnhem", "NAME_LATN": "Arnhem"},
            "bbox": [5.804433, 51.934307, 5.989966, 52.077713],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.946363, 52.077713], [5.948221, 52.076846], [5.955965, 52.073234], [5.948221, 52.066423], [5.942742, 52.061602], [5.937232, 52.047713], [5.941248, 52.012458], [5.948221, 52.00376], [5.951553, 51.999603], [5.953792, 51.994797], [5.956459, 51.991821], [5.959979, 51.989094], [5.965363, 51.986385], [5.979427, 51.982143], [5.983344, 51.979912], [5.989966, 51.974403], [5.980603, 51.973728], [5.974215, 51.97258], [5.96643, 51.97174], [5.960141, 51.969867], [5.954706, 51.966522], [5.951774, 51.963611], [5.950288, 51.961277], [5.949437, 51.956688], [5.950823, 51.952919], [5.956993, 51.947551], [5.948221, 51.95221], [5.934086, 51.959716], [5.929608, 51.951563], [5.914722, 51.949346], [5.902997, 51.93473], [5.898031, 51.934307], [5.869327, 51.941907], [5.830055, 51.945693], [5.830183, 51.960545], [5.835391, 51.965133], [5.835525, 51.973564], [5.856368, 51.969927], [5.86334, 51.970503], [5.868303, 51.972996], [5.869618, 51.974772], [5.864758, 51.977486], [5.866838, 51.981413], [5.863612, 51.985867], [5.86319, 51.994953], [5.804433, 52.003994], [5.808512, 52.018388], [5.813245, 52.023872], [5.837373, 52.045817], [5.846272, 52.050061], [5.858682, 52.051897], [5.881668, 52.049532], [5.898061, 52.050132], [5.898822, 52.062792], [5.910775, 52.062678], [5.946363, 52.077713]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL260307", "CNTR_CODE": "NL", "NAME_ASCI": "Amersfoort", "NSI_CODE": "GM0307", "NAME_NSI": "Amersfoort", "NAME_LATN": "Amersfoort"},
            "bbox": [5.306499, 52.108612, 5.483854, 52.219341],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.395558, 52.219341], [5.406415, 52.214268], [5.411286, 52.21773], [5.440076, 52.204272], [5.438494, 52.185213], [5.439437, 52.18127], [5.442207, 52.169678], [5.44956, 52.167627], [5.479896, 52.165809], [5.473287, 52.162865], [5.483854, 52.157459], [5.481513, 52.150539], [5.45833, 52.153448], [5.442171, 52.161211], [5.424017, 52.157565], [5.418122, 52.154647], [5.413107, 52.147278], [5.397747, 52.134283], [5.374003, 52.13118], [5.355345, 52.136204], [5.3345, 52.120857], [5.310815, 52.108612], [5.306499, 52.110317], [5.331228, 52.127353], [5.331296, 52.137045], [5.336385, 52.14602], [5.338325, 52.158003], [5.343792, 52.161275], [5.349514, 52.174439], [5.338579, 52.18127], [5.336422, 52.182617], [5.325317, 52.182613], [5.322375, 52.189144], [5.310634, 52.192181], [5.309854, 52.195483], [5.314527, 52.202972], [5.330692, 52.203388], [5.327856, 52.209221], [5.328935, 52.212581], [5.330528, 52.214683], [5.391286, 52.205891], [5.395558, 52.219341]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL260344", "CNTR_CODE": "NL", "NAME_ASCI": "Utrecht", "NSI_CODE": "GM0344", "NAME_NSI": "Utrecht", "NAME_LATN": "Utrecht"},
            "bbox": [4.969931, 52.026767, 5.195201, 52.141255],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.152965, 52.056736], [5.150178, 52.055759], [5.145856, 52.052608], [5.12685, 52.05492], [5.111894, 52.057792], [5.105241, 52.050311], [5.097308, 52.058853], [5.076409, 52.06204], [5.07032, 52.061378], [5.064349, 52.051613], [5.06256, 52.026767], [5.04888, 52.031873], [5.026866, 52.054799], [5.021266, 52.056567], [5.017, 52.061134], [5.017966, 52.062176], [4.999457, 52.066166], [5.00456, 52.08771], [4.994477, 52.090844], [4.98873, 52.100325], [4.974557, 52.101222], [4.979887, 52.111482], [4.969931, 52.122436], [4.974414, 52.129457], [4.983905, 52.132128], [4.987599, 52.135729], [5.001844, 52.141255], [5.01386, 52.128569], [5.021266, 52.124223], [5.03326, 52.117186], [5.046938, 52.129298], [5.061461, 52.12307], [5.068575, 52.126415], [5.075101, 52.126645], [5.086949, 52.135032], [5.101636, 52.130106], [5.107088, 52.133259], [5.126536, 52.124691], [5.146986, 52.119609], [5.15059, 52.111281], [5.161201, 52.106936], [5.156892, 52.099002], [5.160418, 52.095134], [5.18365, 52.093567], [5.192739, 52.086075], [5.195201, 52.077335], [5.182612, 52.076542], [5.160838, 52.078386], [5.156139, 52.071519], [5.158718, 52.066853], [5.157264, 52.058918], [5.152965, 52.056736]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL200014", "CNTR_CODE": "NL", "NAME_ASCI": "Groningen", "NSI_CODE": "GM0014", "NAME_NSI": "Groningen", "NAME_LATN": "Groningen"},
            "bbox": [6.462716, 53.17936, 6.715883, 53.264831],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[6.513396, 53.196972], [6.506661, 53.199691], [6.494953, 53.198623], [6.4848, 53.203695], [6.463397, 53.200119], [6.462716, 53.201996], [6.466892, 53.20433], [6.466997, 53.206165], [6.464578, 53.207634], [6.481171, 53.249258], [6.486734, 53.249202], [6.493526, 53.24581], [6.503052, 53.248161], [6.509971, 53.253205], [6.508251, 53.257473], [6.524497, 53.257041], [6.537965, 53.26042], [6.53882, 53.263643], [6.54182, 53.263962], [6.549979, 53.264831], [6.553377, 53.262474], [6.587797, 53.261932], [6.587429, 53.256059], [6.60441, 53.253881], [6.608046, 53.251557], [6.620942, 53.249747], [6.634944, 53.251217], [6.64451, 53.235559], [6.698349, 53.256168], [6.712238, 53.246789], [6.715883, 53.242032], [6.708043, 53.234549], [6.706566, 53.22502], [6.69355, 53.213892], [6.677244, 53.209535], [6.658616, 53.211116], [6.666856, 53.202003], [6.641515, 53.190894], [6.643947, 53.187796], [6.639731, 53.185947], [6.60362, 53.196268], [6.596944, 53.19475], [6.597392, 53.190609], [6.582766, 53.186296], [6.579478, 53.183343], [6.555717, 53.183309], [6.548405, 53.180855], [6.54182, 53.17936], [6.535176, 53.183763], [6.529076, 53.195594], [6.516959, 53.197758], [6.513396, 53.196972]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL210080", "CNTR_CODE": "NL", "NAME_ASCI": "Leeuwarden", "NSI_CODE": "GM0080", "NAME_NSI": "Leeuwarden", "NAME_LATN": "Leeuwarden"},
            "bbox": [5.730833, 53.045898, 5.948165, 53.242885],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.756528, 53.115841], [5.755079, 53.126463], [5.764054, 53.143441], [5.764766, 53.173645], [5.737741, 53.172527], [5.74447, 53.184337], [5.740864, 53.186531], [5.744002, 53.197712], [5.735213, 53.210304], [5.743647, 53.21186], [5.74626, 53.214915], [5.734327, 53.216742], [5.732859, 53.229078], [5.735416, 53.232121], [5.730833, 53.235238], [5.743863, 53.241081], [5.760087, 53.239268], [5.764379, 53.235048], [5.772668, 53.232831], [5.77704, 53.226553], [5.806978, 53.2243], [5.816013, 53.226702], [5.831914, 53.242885], [5.856535, 53.242776], [5.85444, 53.231274], [5.878664, 53.232247], [5.881943, 53.225646], [5.89356, 53.22247], [5.889946, 53.219753], [5.890983, 53.217728], [5.904894, 53.213606], [5.905056, 53.21119], [5.900378, 53.209387], [5.859423, 53.20369], [5.860552, 53.19439], [5.853404, 53.189273], [5.864536, 53.171508], [5.932009, 53.168763], [5.929886, 53.159258], [5.910433, 53.143672], [5.922956, 53.131653], [5.943574, 53.121757], [5.948165, 53.104682], [5.944465, 53.104323], [5.931718, 53.110102], [5.883756, 53.106907], [5.885402, 53.094925], [5.87932, 53.09143], [5.88173, 53.088261], [5.872857, 53.084915], [5.82339, 53.077348], [5.796387, 53.05884], [5.793465, 53.057522], [5.788568, 53.054598], [5.77704, 53.047774], [5.773913, 53.045922], [5.769857, 53.045898], [5.771412, 53.047198], [5.766296, 53.051696], [5.762543, 53.059875], [5.773785, 53.065868], [5.774667, 53.068685], [5.773152, 53.073924], [5.765441, 53.080006], [5.772827, 53.082572], [5.772954, 53.089822], [5.77704, 53.091964], [5.786413, 53.097533], [5.77704, 53.103019], [5.769697, 53.10364], [5.76912, 53.106426], [5.762846, 53.109083], [5.761587, 53.112805], [5.757734, 53.113412], [5.756528, 53.115841]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL220106", "CNTR_CODE": "NL", "NAME_ASCI": "Assen", "NSI_CODE": "GM0106", "NAME_NSI": "Assen", "NAME_LATN": "Assen"},
            "bbox": [6.485224, 52.933787, 6.631211, 53.06116],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[6.561478, 52.946666], [6.543146, 52.954567], [6.54182, 52.950705], [6.536396, 52.934908], [6.533427, 52.933787], [6.519079, 52.939302], [6.51742, 52.943719], [6.499303, 52.950644], [6.49149, 52.948148], [6.485224, 52.949947], [6.492746, 52.957981], [6.488505, 52.961618], [6.494775, 52.968483], [6.486466, 52.973415], [6.495471, 52.982388], [6.494237, 52.985622], [6.498044, 52.989988], [6.492455, 52.993894], [6.488213, 53.005405], [6.505937, 53.010132], [6.513037, 53.010559], [6.509979, 53.01704], [6.503874, 53.016044], [6.495529, 53.030899], [6.502894, 53.032215], [6.499952, 53.038429], [6.501702, 53.041109], [6.505131, 53.046356], [6.511674, 53.044803], [6.524911, 53.045307], [6.529971, 53.041109], [6.532784, 53.038775], [6.54182, 53.03651], [6.546233, 53.035403], [6.55138, 53.039861], [6.551271, 53.041109], [6.550661, 53.048038], [6.556211, 53.058358], [6.568743, 53.059489], [6.573292, 53.054858], [6.576987, 53.058917], [6.589571, 53.058476], [6.601162, 53.06116], [6.607695, 53.0492], [6.605781, 53.041109], [6.603943, 53.033334], [6.631211, 53.026108], [6.630222, 53.016876], [6.615129, 53.006884], [6.606981, 52.987024], [6.59676, 52.979193], [6.595256, 52.972779], [6.580014, 52.96632], [6.561478, 52.946666]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL220119", "CNTR_CODE": "NL", "NAME_ASCI": "Meppel", "NSI_CODE": "GM0119", "NAME_NSI": "Meppel", "NAME_LATN": "Meppel"},
            "bbox": [6.120559, 52.667988, 6.286369, 52.773063],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[6.158892, 52.692104], [6.15542, 52.694171], [6.120559, 52.751547], [6.128375, 52.757349], [6.155049, 52.762399], [6.167855, 52.767271], [6.172879, 52.773063], [6.201196, 52.731055], [6.218576, 52.747648], [6.231439, 52.74171], [6.233268, 52.73923], [6.216788, 52.719213], [6.21749, 52.703681], [6.223808, 52.703328], [6.231845, 52.706091], [6.2476, 52.707774], [6.255607, 52.705268], [6.272623, 52.705855], [6.278393, 52.699474], [6.27697, 52.696253], [6.286369, 52.698139], [6.284614, 52.69038], [6.275827, 52.688916], [6.283157, 52.682976], [6.270651, 52.681983], [6.272108, 52.67459], [6.265509, 52.667988], [6.261747, 52.670049], [6.251546, 52.670429], [6.244755, 52.677893], [6.235912, 52.678169], [6.231822, 52.681158], [6.216301, 52.68606], [6.201232, 52.684093], [6.193004, 52.676987], [6.185943, 52.681797], [6.182718, 52.681905], [6.182455, 52.675784], [6.178322, 52.676003], [6.164356, 52.679677], [6.16891, 52.686737], [6.158892, 52.692104]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL230150", "CNTR_CODE": "NL", "NAME_ASCI": "Deventer", "NSI_CODE": "GM0150", "NAME_NSI": "Deventer", "NAME_LATN": "Deventer"},
            "bbox": [6.101319, 52.21947, 6.381998, 52.320959],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[6.101319, 52.301246], [6.111846, 52.298165], [6.170303, 52.308548], [6.180685, 52.309036], [6.182329, 52.314561], [6.200228, 52.316842], [6.2066, 52.320959], [6.235401, 52.31987], [6.235152, 52.314365], [6.267314, 52.30083], [6.305954, 52.300594], [6.326622, 52.301677], [6.329117, 52.281676], [6.340318, 52.276121], [6.368764, 52.261081], [6.375797, 52.259142], [6.377098, 52.251119], [6.381998, 52.246086], [6.366893, 52.241734], [6.351576, 52.241532], [6.340318, 52.236052], [6.337648, 52.227534], [6.318322, 52.225682], [6.299384, 52.225678], [6.291033, 52.230418], [6.26961, 52.226728], [6.260477, 52.228414], [6.238573, 52.227729], [6.216414, 52.231085], [6.214353, 52.227413], [6.190051, 52.229375], [6.181321, 52.233563], [6.166412, 52.231045], [6.169516, 52.226699], [6.164844, 52.225754], [6.165414, 52.224548], [6.166768, 52.221263], [6.16503, 52.21947], [6.159534, 52.224548], [6.148312, 52.228045], [6.142913, 52.233163], [6.143345, 52.238063], [6.151845, 52.243493], [6.152359, 52.246272], [6.140951, 52.247482], [6.125294, 52.251949], [6.128354, 52.261021], [6.112869, 52.278717], [6.110636, 52.288064], [6.101319, 52.301246]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL230193", "CNTR_CODE": "NL", "NAME_ASCI": "Zwolle", "NSI_CODE": "GM0193", "NAME_NSI": "Zwolle", "NAME_LATN": "Zwolle"},
            "bbox": [6.00445, 52.440574, 6.209928, 52.587858],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[6.109793, 52.440574], [6.105359, 52.442394], [6.103824, 52.443493], [6.102399, 52.445286], [6.102109, 52.448059], [6.103113, 52.450855], [6.103481, 52.454086], [6.101479, 52.466995], [6.09979, 52.469787], [6.09551, 52.473354], [6.092339, 52.475456], [6.090623, 52.476202], [6.087563, 52.477531], [6.084508, 52.478527], [6.075386, 52.480655], [6.068804, 52.483509], [6.064125, 52.487217], [6.05751, 52.497253], [6.054039, 52.499935], [6.042637, 52.505443], [6.027829, 52.509654], [6.017906, 52.514707], [6.015088, 52.519282], [6.018762, 52.525528], [6.029702, 52.527269], [6.030128, 52.537451], [6.008341, 52.544958], [6.00445, 52.549785], [6.033026, 52.559379], [6.062367, 52.566735], [6.069953, 52.559009], [6.080327, 52.554227], [6.089533, 52.552368], [6.090623, 52.553533], [6.102497, 52.566229], [6.107895, 52.567286], [6.110643, 52.56143], [6.1182, 52.557651], [6.141004, 52.552665], [6.166023, 52.565747], [6.15656, 52.581409], [6.147552, 52.584388], [6.179807, 52.587858], [6.193333, 52.584465], [6.202098, 52.584938], [6.209928, 52.566712], [6.190567, 52.537387], [6.192419, 52.531485], [6.187296, 52.52363], [6.181758, 52.520083], [6.174249, 52.518369], [6.188414, 52.499881], [6.19884, 52.494792], [6.199355, 52.491061], [6.190728, 52.481529], [6.162546, 52.474342], [6.145198, 52.467671], [6.151613, 52.461775], [6.154578, 52.453182], [6.147795, 52.445139], [6.138836, 52.442071], [6.109793, 52.440574]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL270363", "CNTR_CODE": "NL", "NAME_ASCI": "Amsterdam", "NSI_CODE": "GM0363", "NAME_NSI": "Amsterdam", "NAME_LATN": "Amsterdam"},
            "bbox": [4.728729, 52.278316, 5.079161, 52.431221],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[4.898694, 52.424434], [4.922782, 52.415398], [4.929014, 52.41262], [4.930688, 52.411583], [4.935748, 52.41214], [4.942559, 52.413868], [4.944501, 52.414665], [4.947778, 52.421577], [4.97224, 52.42284], [4.9822, 52.42613], [4.986869, 52.423562], [4.998947, 52.425318], [5.016741, 52.419712], [5.022985, 52.420634], [5.030965, 52.416371], [5.035643, 52.417998], [5.048417, 52.415606], [5.067398, 52.416435], [5.074277, 52.412907], [5.079161, 52.388653], [5.037661, 52.375358], [5.039059, 52.354576], [5.017333, 52.348632], [5.009776, 52.34251], [4.99985, 52.341951], [4.97572, 52.354044], [4.969338, 52.355038], [4.950355, 52.33863], [4.936962, 52.334971], [4.927026, 52.336084], [4.922782, 52.333174], [4.913751, 52.330184], [4.911305, 52.322946], [4.913278, 52.319694], [4.90924, 52.318577], [4.895522, 52.322344], [4.858025, 52.321777], [4.85351, 52.330336], [4.818787, 52.325477], [4.798354, 52.335391], [4.789728, 52.342284], [4.757299, 52.355903], [4.756757, 52.377861], [4.759235, 52.379398], [4.757803, 52.396812], [4.728729, 52.400688], [4.739189, 52.431221], [4.854525, 52.416975], [4.859058, 52.419856], [4.858497, 52.424586], [4.862699, 52.430019], [4.871515, 52.42968], [4.878626, 52.425856], [4.898694, 52.424434]]], [[[4.944716, 52.327129], [4.947966, 52.327356], [4.953529, 52.323215], [4.965891, 52.327097], [4.970736, 52.326935], [4.97692, 52.330801], [4.983777, 52.330473], [4.989648, 52.327084], [4.99859, 52.314615], [5.016104, 52.324512], [5.017666, 52.323265], [5.021538, 52.302498], [5.014443, 52.303447], [5.008343, 52.301479], [4.997416, 52.289648], [4.983213, 52.289951], [4.967672, 52.280348], [4.955408, 52.278316], [4.929822, 52.307714], [4.93992, 52.317156], [4.938642, 52.323949], [4.944716, 52.327129]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL270388", "CNTR_CODE": "NL", "NAME_ASCI": "Enkhuizen", "NSI_CODE": "GM0388", "NAME_NSI": "Enkhuizen", "NAME_LATN": "Enkhuizen"},
            "bbox": [5.212299, 52.675728, 5.377262, 52.840633],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.337842, 52.795955], [5.377262, 52.764805], [5.361148, 52.675728], [5.298071, 52.692662], [5.28848, 52.691512], [5.268962, 52.680267], [5.259765, 52.687172], [5.257528, 52.716137], [5.254916, 52.744491], [5.270616, 52.745657], [5.273586, 52.750951], [5.212299, 52.800393], [5.28118, 52.840633], [5.337842, 52.795955]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL270392", "CNTR_CODE": "NL", "NAME_ASCI": "Haarlem", "NSI_CODE": "GM0392", "NAME_NSI": "Haarlem", "NAME_LATN": "Haarlem"},
            "bbox": [4.599941, 52.338909, 4.686155, 52.428105],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[4.639818, 52.338909], [4.640881, 52.346009], [4.635649, 52.355042], [4.636461, 52.360838], [4.605505, 52.363346], [4.606506, 52.366448], [4.599941, 52.377872], [4.600765, 52.382812], [4.611339, 52.389195], [4.621919, 52.388935], [4.631682, 52.41167], [4.636893, 52.411935], [4.651915, 52.428105], [4.666728, 52.424886], [4.67476, 52.419216], [4.68086, 52.418931], [4.68243, 52.413311], [4.672854, 52.409331], [4.673296, 52.40621], [4.668989, 52.403065], [4.677538, 52.399008], [4.673794, 52.394243], [4.674723, 52.391283], [4.686155, 52.386569], [4.685041, 52.382879], [4.677701, 52.377243], [4.675288, 52.376198], [4.672952, 52.374458], [4.671863, 52.372967], [4.671405, 52.371223], [4.671613, 52.369606], [4.676502, 52.355903], [4.676501, 52.35448], [4.675015, 52.352192], [4.673058, 52.350853], [4.649849, 52.340729], [4.646272, 52.339828], [4.639818, 52.338909]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL280513", "CNTR_CODE": "NL", "NAME_ASCI": "Gouda", "NSI_CODE": "GM0513", "NAME_NSI": "Gouda", "NAME_LATN": "Gouda"},
            "bbox": [4.660994, 51.996238, 4.756425, 52.040077],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[4.706179, 52.040077], [4.715061, 52.038217], [4.719254, 52.034813], [4.720704, 52.0268], [4.742859, 52.022313], [4.750769, 52.01408], [4.756425, 52.001815], [4.729507, 52.007082], [4.72401, 52.005549], [4.726474, 52.001628], [4.720815, 51.999103], [4.707444, 52.0012], [4.700213, 51.99757], [4.688698, 51.996238], [4.679642, 51.997201], [4.670933, 52.001956], [4.660994, 52.004489], [4.669417, 52.010998], [4.667034, 52.012744], [4.680859, 52.019688], [4.668675, 52.025221], [4.683312, 52.029014], [4.706179, 52.040077]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL290664", "CNTR_CODE": "NL", "NAME_ASCI": "Goes", "NSI_CODE": "GM0664", "NAME_NSI": "Goes", "NAME_LATN": "Goes"},
            "bbox": [3.70554, 51.479114, 3.971697, 51.552811],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[3.70554, 51.502495], [3.712704, 51.506859], [3.743071, 51.512169], [3.746225, 51.51513], [3.745417, 51.517114], [3.713539, 51.530414], [3.740457, 51.546028], [3.760758, 51.552811], [3.768889, 51.552318], [3.794601, 51.543434], [3.834412, 51.551832], [3.842964, 51.547889], [3.85573, 51.542004], [3.869229, 51.541688], [3.88495, 51.543104], [3.897487, 51.541543], [3.912253, 51.545643], [3.925222, 51.54422], [3.940179, 51.526657], [3.954896, 51.529735], [3.971697, 51.528248], [3.963785, 51.520385], [3.964166, 51.506304], [3.945796, 51.498311], [3.939356, 51.493293], [3.92658, 51.491419], [3.92467, 51.486271], [3.916288, 51.484943], [3.91295, 51.479114], [3.876489, 51.480341], [3.842964, 51.48517], [3.810283, 51.483239], [3.793275, 51.486767], [3.791018, 51.490299], [3.774255, 51.497261], [3.70554, 51.502495]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL290687", "CNTR_CODE": "NL", "NAME_ASCI": "Middelburg", "NSI_CODE": "GM0687", "NAME_NSI": "Middelburg", "NAME_LATN": "Middelburg"},
            "bbox": [3.57644, 51.468668, 3.746225, 51.535183],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[3.703656, 51.482269], [3.694546, 51.480505], [3.669707, 51.470847], [3.662134, 51.468668], [3.651583, 51.469076], [3.629452, 51.480348], [3.621395, 51.476247], [3.616796, 51.477334], [3.609243, 51.476032], [3.602482, 51.478564], [3.598961, 51.476093], [3.587046, 51.47921], [3.580359, 51.488261], [3.584611, 51.491568], [3.58439, 51.495118], [3.57644, 51.506228], [3.58224, 51.508723], [3.579908, 51.512193], [3.584555, 51.519444], [3.595855, 51.522854], [3.590877, 51.531682], [3.601308, 51.534375], [3.61238, 51.534702], [3.617328, 51.525937], [3.63285, 51.525716], [3.635339, 51.520863], [3.640603, 51.519902], [3.655489, 51.521701], [3.659549, 51.520054], [3.669707, 51.527018], [3.680836, 51.534958], [3.696384, 51.535183], [3.69576, 51.52958], [3.699819, 51.523049], [3.705039, 51.524341], [3.713539, 51.530414], [3.745417, 51.517114], [3.746225, 51.51513], [3.743071, 51.512169], [3.712704, 51.506859], [3.70554, 51.502495], [3.699344, 51.491893], [3.700468, 51.483896], [3.703656, 51.482269]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL300797", "CNTR_CODE": "NL", "NAME_ASCI": "Heusden", "NSI_CODE": "GM0797", "NAME_NSI": "Heusden", "NAME_LATN": "Heusden"},
            "bbox": [5.081756, 51.636108, 5.250607, 51.743],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.226243, 51.689922], [5.222782, 51.674402], [5.207869, 51.673491], [5.203705, 51.671324], [5.204769, 51.6698], [5.166754, 51.668976], [5.161599, 51.663212], [5.157705, 51.663158], [5.156958, 51.657688], [5.154337, 51.654815], [5.160205, 51.639477], [5.150049, 51.639587], [5.145641, 51.640403], [5.106195, 51.636108], [5.101363, 51.67675], [5.106475, 51.678767], [5.103519, 51.701536], [5.110409, 51.703887], [5.110277, 51.706005], [5.098163, 51.716904], [5.081756, 51.72229], [5.092009, 51.727512], [5.101634, 51.731212], [5.115254, 51.735233], [5.128058, 51.73761], [5.146862, 51.740642], [5.165557, 51.742878], [5.175954, 51.743], [5.185596, 51.741863], [5.192688, 51.740482], [5.195342, 51.740234], [5.201624, 51.740661], [5.206699, 51.741493], [5.210184, 51.733907], [5.230057, 51.72481], [5.229524, 51.712232], [5.231012, 51.711057], [5.239448, 51.712397], [5.236902, 51.706453], [5.239052, 51.702395], [5.247223, 51.70206], [5.250607, 51.699643], [5.24725, 51.694848], [5.226243, 51.689922]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL311518", "CNTR_CODE": "NL", "NAME_ASCI": "Den Haag", "NSI_CODE": "GM0518", "NAME_NSI": "Den Haag", "NAME_LATN": "Den Haag"},
            "bbox": [4.2409, 52.0367, 4.3370, 52.1186],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[4.2409, 52.0367], [4.3370, 52.0367], [4.3370, 52.1186], [4.2409, 52.1186], [4.2409, 52.0367]]]]
            }
        },
        {
            "type": "Feature",
            "properties": {"id": "NL310935", "CNTR_CODE": "NL", "NAME_ASCI": "Maastricht", "NSI_CODE": "GM0935", "NAME_NSI": "Maastricht", "NAME_LATN": "Maastricht"},
            "bbox": [5.639813, 50.804281, 5.762745, 50.911141],
            "geometry": {
                "type": "MultiPolygon",
                "coordinates": [[[[5.687622, 50.811924], [5.680473, 50.812961], [5.677265, 50.816089], [5.655416, 50.819757], [5.655255, 50.82457], [5.650227, 50.827847], [5.650486, 50.831973], [5.64802, 50.834333], [5.645125, 50.837105], [5.639813, 50.847808], [5.646647, 50.872125], [5.667609, 50.880492], [5.678667, 50.881717], [5.68224, 50.887448], [5.694282, 50.896731], [5.699535, 50.909563], [5.707058, 50.911141], [5.71538, 50.908509], [5.713071, 50.90308], [5.723699, 50.89369], [5.726857, 50.884735], [5.735461, 50.882008], [5.73415, 50.875031], [5.743113, 50.871931], [5.755016, 50.871065], [5.759263, 50.866677], [5.762745, 50.866535], [5.761909, 50.863855], [5.7522, 50.858174], [5.757396, 50.855358], [5.755293, 50.842809], [5.74125, 50.839182], [5.746539, 50.831402], [5.743529, 50.821812], [5.718094, 50.814135], [5.716037, 50.804281], [5.709901, 50.804909], [5.707887, 50.808144], [5.696411, 50.808547], [5.693064, 50.811488], [5.687622, 50.811924]]]]
            }
        }
    ]
};

const cityData = {};

// Dit script verwerkt de ruwe GeoJSON naar het formaat dat we nodig hebben
geoJsonData.features.forEach(feature => {
    const name = feature.properties.NAME_LATN;
    const bbox = feature.bbox; // [minLon, minLat, maxLon, maxLat]

    // Bereken het centrum van de bounding box
    const centerLon = (bbox[0] + bbox[2]) / 2;
    const centerLat = (bbox[1] + bbox[3]) / 2;

    cityData[name] = {
        lat: parseFloat(centerLat.toFixed(4)),
        lon: parseFloat(centerLon.toFixed(4)),
        bbox: bbox
    };
});

/**
 * Berekent de afstand tussen twee geo-coördinaten in kilometers.
 */
function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
    const R = 6371; // Radius van de aarde
    const dLat = (lat2 - lat1) * (Math.PI / 180);
    const dLon = (lon2 - lon1) * (Math.PI / 180);
    const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}


/*Deze functie berekent de afstand tussen twee punten op aarde, gegeven hun breedte- en lengtegraad (in graden).
Het gebruikt de haversine-formule, die rekening houdt met de kromming van de aarde:
    R is de straal van de aarde in kilometers.
    dLat en dLon zijn het verschil in breedte- en lengtegraad, omgerekend naar radialen.
    a berekent een tussenwaarde met behulp van sinus- en cosinusfuncties.
    c is de centrale hoek tussen de punten.
    De functie retourneert de afstand in kilometers tussen de twee coördinaten.*/

/**
 * Haalt de geo-data voor een stad op, inclusief een berekende radius.
 */

export const getGeoDataByCity = (cityName) => {
    // Speciale optimalisatie voor Baden-Baden met exacte Wikipedia coördinaten
    if (cityName === 'Baden-Baden') {
        return {
            lat: 48.7667,   // 48° 46′ NB
            lon: 8.2333,    // 08° 14′ OL  
            radius: 32      // Bredere radius voor meer zoekresultaten
        };
    }

    const city = cityData[cityName];
    if (!city) return null;

    const [_minLon, _minLat, maxLon, maxLat] = city.bbox;
    // Bereken de afstand van het centrum tot de hoek van de bounding box
    const radius = getDistanceFromLatLonInKm(city.lat, city.lon, maxLat, maxLon);

    return {
        lat: city.lat,
        lon: city.lon,
        // Rond de radius af naar boven en voeg 10% marge toe voor de zekerheid.
        // Maximaal 20km om te voorkomen dat we te breed zoeken bij grote gemeentes.
        radius: Math.min(Math.ceil(radius * 1.1), 20)
    };
};
