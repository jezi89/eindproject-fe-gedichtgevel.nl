// SearchBar Component Styles
// =====================================

@use "@/styles/variables" as *;
@use "@/styles/mixins" as mixins;
@use "sass:color";
@use "@/styles/effects" as *;

// ===========================
// BASE COMPONENTS
// ===========================

.searchSection {
  // Main search section container
  width: 100%;

  // Compact mode for header usage
  &.compact {
	.searchBar {
	  width:        min(600px, 80vw);
	  min-height:   3rem;
	  border-width: $border-width-custom-thick;
	  }

	.searchInputContainer {
	  margin-left: $spacing-xxxl + $spacing-l;
	  }

	.searchInput {
	  font-size: $font-size-xxxs;
	  }

	.searchButton {
	  font-size: $font-size-xxxs;
	  padding:   $spacing-s $spacing-m;
	  }
	}

  // Canvas variant - centered input with left padding compensation
  &.canvas {
	.searchBar {
	  border-left: none;
	  }

	.searchInputContainer {
	  margin-left:  0;
	  padding-left: $spacing-xxl + $spacing-xs;
	  }
	}
  }

.searchContainer {
  position: relative;
  width:    100%;
  }

// ===========================
// MAIN SEARCH BAR LAYOUT
// ===========================

.searchBar {
  position:    relative;
  display:     flex;
  align-items: center;
  width:       min(951px, 90vw);
  min-height:  $spacing-xxxl; // 4rem
  max-height:  $spacing-xxxl * 2; // 8rem Allow expansion for 2 lines
  margin:      0 auto;
  transition:  border-color $transition-normal;
  border:      $border-width-thick + $border-width-regular solid $primary-cognac;
  background:  $search-background;

  // Active state - blue border when text is entered
  &.searchBarActive {
	border-color: $search-border;
	}
  }

.searchInputContainer {
  display:         flex;
  align-items:     center; // Vertically center the textarea
  flex:            1;
  justify-content: center; // Horizontally center the textarea
  margin-left:     $spacing-xxxl * 2;
  }


// ===========================
// SEARCH INPUT & TEXTAREA
// ===========================

.searchInput {
  font-family:   $font-family-searchbar;
  font-size:     $font-size-xxl;
  font-weight:   $font-weight-extrabold;
  line-height:   $line-height-normal-unitless;
  overflow:      hidden;
  width:         100%;
  max-height:    $spacing-xxxl + $spacing-xxl + $spacing-xxs;
  padding:       $spacing-xs 0;
  resize:        none;
  transition:    font-size $transition-fast;
  text-align:    center;
  color:         $search-text;
  border:        none;
  background:    transparent;
  caret-color:   $primary-cognac;
  overflow-wrap: break-word;

  // When there's content, scale up the text
  &:not(:placeholder-shown) {
	font-size: clamp(1.25rem, 3vw, $font-size-xxl);
	}

  &:focus {
	font-size: clamp(1.25rem, 3vw, $font-size-xxl);
	color:     $search-text;
	outline:   none;
	}

  // Placeholder disappears on focus
  &:focus::placeholder {
	transition: opacity $transition-fast;
	opacity:    0;
	}

  &::placeholder {
	font-size:   $font-size-xl;
	font-weight: $font-weight-semibold;
	line-height: $line-height-normal-unitless;
	transition:  opacity $transition-fast;
	opacity:     0.8;
	color:       $search-placeholder;
	}
  }

// ===========================
// CHARACTER COUNT INDICATOR
// ===========================

.characterCount {
  font-family: $font-family-searchbar;
  font-size:   $font-size-xs;
  position:    absolute;
  bottom:      $spacing-xs;
  left:        $spacing-xs;
  pointer-events: none;
  opacity:     0.7;
  color:       $neutral-mid-dark;
  z-index:     1;
  }

// ===========================
// SEARCH BUTTON & CONTAINER
// ===========================

.searchButtonContainer {
  @include mixins.flex-center;
  margin-right: $spacing-xs;
  position:     relative;
  z-index:      2;
  }

.searchButton {
  font-family:   $font-family-button;
  font-size:     $font-size-l;
  font-weight:   $font-weight-extrabold;
  line-height:   $line-height-normal;
  @include mixins.flex-center;
  width:         104px;
  min-height:    $spacing-xl + $spacing-xs;
  padding:       $spacing-xs $spacing-m;
  cursor:        pointer;
  transition:    all $transition-fast;
  text-align:    center;
  color:         $neutral-white;
  border:        $border-width-custom-thick solid $neutral-white;
  border-radius: 0;
  background:    $button-tertiary-background;
  box-shadow:    0 0 1.5px 2px $secondary-light, inset 2px 2px 0.5px 2px $secondary-light, inset -2px -2px 0.5px 2px $secondary-light;

  &:hover:not(:disabled) {
	transform:  translateY(-1px);
	background: color.adjust($button-tertiary-background, $lightness: -15%);
	// Enhanced Figma shadow on hover
	box-shadow: 0 0 3px 3px $secondary-light, inset 1px 1px 0px 3px $secondary-light, inset -1px 0px 1px 4px $secondary-light;

	}

  &:disabled {
	opacity:          0.7;
	border:           $border-width-custom-thick solid $neutral-mid-light;
	background-color: $neutral-mid;
	// Reduced Figma shadow for disabled state
	box-shadow:       0 0 0.5px 1px rgba($secondary-light, 0.3), inset 1px 1px 0.25px 2px rgba($secondary-light, 0.3), inset -1px -1px 0.25px 2px rgba($secondary-light, 0.3);
	}
  }

// ===========================
// RESPONSIVE BREAKPOINTS
// ===========================

// Large screens (1400px and below)
@include mixins.media-down($screen-xxl) {
  .searchBar {
	width: min(85vw, 800px);
	}

  .searchInput {
	font-size: $font-size-xl;

	&:not(:placeholder-shown),
	&:focus {
	  font-size: clamp(1.125rem, 3vw, $font-size-xl + $font-size-xxs);
	  }

	&::placeholder {
	  font-size: $font-size-s;
	  }
	}

  .searchButton {
	font-size: clamp(1.125rem, 2vw, $font-size-m);
	width:     clamp(80px, 8vw, 104px);
	}

  // Canvas variant responsive adjustments
  .searchSection.canvas .searchInputContainer {
	padding-left: $spacing-xxl;
	}
  }

// Tablet screens (1024px and below)
@include mixins.media-down($screen-lg) {
  .searchBar {
	width:      min(90vw, 700px);
	min-height: $spacing-xl + $spacing-m;
	}

  .searchInput {
	font-size: $font-size-l;

	&:not(:placeholder-shown),
	&:focus {
	  font-size: clamp(1rem, 3vw, $font-size-l);
	  }

	&::placeholder {
	  font-size: $font-size-s;
	  }
	}

  .searchButton {
	font-size:  clamp(1rem, 2vw, $font-size-m - $font-size-xxxs);
	width:      clamp(70px, 10vw, 80px);
	min-height: $spacing-xl + $spacing-xs;
	}

  // Canvas variant responsive adjustments
  .searchSection.canvas .searchInputContainer {
	padding-left: $spacing-xl + $spacing-xs;
	}
  }

// Mobile screens (768px and below)
@include mixins.media-down($screen-md) {
  .searchBar {
	flex-direction: column;
	width:          min(95vw, 600px);
	min-height:     auto;
	max-height:     none;
	padding:        $spacing-m;
	border-radius:  $border-radius-lg;
	gap:            $spacing-m;
	}

  .searchInputContainer {
	margin-left: 0;
	padding:     0;
	}

  .searchInput {
	font-size:     $font-size-m;
	padding:       $spacing-xs $spacing-m; // Balanced padding for vertical centering
	line-height:   1.2; // Tighter line-height for better fit
	text-align:    center;
	
	// Ensure placeholder is centered (browser dependent, but padding helps)
	&::placeholder {
	  line-height: normal;
	}
	
	border:        $border-width-thin solid $accent-greyish;
	border-radius: $border-radius-sm;

	&:not(:placeholder-shown),
	&:focus {
	  font-size: clamp(0.875rem, 4vw, $font-size-m - $font-size-xxxs);
	  }

	&::placeholder {
	  font-size: $font-size-xs;
	  }
	}

  .characterCount {
	bottom: $spacing-xs;
	left:   $spacing-s;
	}

  .searchButton {
	font-size:     clamp(0.875rem, 3vw, $font-size-s);
	width:         100%;
	border-radius: $border-radius-sm;
	}
  }

// ===========================
// EXTRA SMALL MOBILE
// ===========================

// Very small mobile screens (480px and below)
@include mixins.media-down(($screen-xs + 160px) + 1px) {
  .searchInput {
	font-size: $font-size-s;
	}

  .searchButton {
	font-size: $font-size-s;
	}
  }